<label class="form-field">
  <span class="form-field__label">Category<span class="required">*</span></span>
  <div
    class="form-field__control"
    [class.is-open]="isDropdownOpen"
    [class.form-field__control--error]="hasError"
    (click)="toggleDropdownOpen($event)"
  >
    <input
      class="form-field__input"
      type="text"
      [placeholder]="'Select task category'"
      [value]="selectedCategoryLabel"
      readonly
    />
    <button
      type="button"
      class="form-field__icon-button"
      aria-label="Toggle category dropdown"
      (click)="toggleDropdownOpen($event)"
    >
      <img
        class="form-field__icon"
        [class.is-open]="isDropdownOpen"
        src="assets/img/icons/add-task/dropdown-arrow-down.svg"
        alt="dropdown-arrow icon"
      />
    </button>
  </div>

  @if (isDropdownOpen) {
    <div class="dropdown">
      @for (category of taskService.taskCategories; track category.value) {
        <button type="button" class="dropdown__item" (click)="selectCategory(category, $event)">
          <span class="dropdown__name">{{ category.label }}</span>
        </button>
      }
    </div>
  }
</label>
